spring:
  application:
    name: dppservice
  datasource:
    url: jdbc:postgresql://localhost:5432/postgres
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true

  kafka:
    bootstrap-servers: 172.16.1.105:9092

    producer:
      retries: 3
      properties:
        delivery.timeout.ms: 3000
        request.timeout.ms: 1000
        retry.backoff.ms: 1000
        max.block.ms: 1000
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer

    consumer:
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer

    properties:
      security:
        protocol: SASL_SSL
      sasl:
        mechanism: SCRAM-SHA-256
        jaas:
          config: "org.apache.kafka.common.security.scram.ScramLoginModule required username=\"admin\" password=\"admin-secret\";"

      ssl:
        truststore:
          location: /usr/local/kafka.truststore.jks
          password: truststore-password
          type: JKS
        endpoint-identification-algorithm: https

coding:
  practitionnerCategory:
    system: "CNSS"
    validation: "optional"
  practitionnerSpeciality:
    system: "CNSS"
    validation: "optional"
  encounterClass:
    system: "http://snomed.info/sct"
    validation: "required"


app:
  kafka:
    active: false
    topic:
      declarationssih: "declarationssih"
  validation:
    # Set to true to validate the bundle structure and profiles
    bundle-enabled: true
    # Set to true to validate terminology and coding systems (requires internet or local terminology server)
    coding-enabled: true

logging:
  level:
    org.apache.kafka.clients.NetworkClient: ERROR
    

# OpenAPI / Swagger configuration
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /v3/api-docs
    groups:
      enabled: true
  # Additional configuration to help with UI loading
  webjars:
    prefix: /webjars
    swagger-ui:
      version: 5.17.2  # Explicit version to match the dependency
  show-actuator: true
  # Make sure all paths are documented
  paths-to-match: /**

# Logging levels (uncomment as needed)
#logging:
#  level:
#    org.springframework.kafka: DEBUG
#    org.apache.kafka: DEBUG
#    sun.security.ssl: DEBUG
#    org.apache.kafka.common.network: DEBUG